<!-- 文件名: index.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>神戸外国人生活ガイド</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <h1>🌏 神戸外国人生活ガイド</h1>
    <nav class="navbar">
      <a href="index.html" class="btn">🏠 ホーム</a>
      <a href="procedure.html" class="btn">📄 手続きガイド</a>
      <a href="map.html" class="btn">🗺️ マップ</a>
      <a href="review.html" class="btn">⭐ レビュー</a>
      <a href="search.html" class="btn">🔎 検索</a>
      <a href="login.html" class="btn">🔐 ログイン</a>
      <!-- 只有管理员可见的示例入口（默认会被脚本隐藏；管理员登录后显示） -->
      <a href="admin.html" class="btn admin-only">🛠 管理</a>
    </nav>
  </header>

  <main>
    <section class="intro">
      <h2>👋 ようこそ！</h2>
      <p>このサイトは神戸周辺で暮らす外国人・留学生をサポートするための生活情報ガイドです。</p>
      <ul class="feature-list">
        <li>📄 手続き方法のガイド</li>
        <li>🗺️ 地図から便利なスポットを探す</li>
        <li>⭐ ユーザーによるレビュー</li>
      </ul>
    </section>

    <!-- （可选）放一些管理员专用说明，带 admin-only 类名，非管理员会隐藏 -->
    <section class="card admin-only">
      <h3>🛠 管理者ツール</h3>
      <p>ここから店舗レビューの編集・削除、ユーザー権限の管理を行えます。</p>
      <p><a class="info-link" href="admin.html">管理画面へ</a></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 神戸外国人支援プロジェクト</p>
  </footer>

  <!-- 页面联动脚本：读取登录邮箱与角色，非管理员隐藏 .admin-only -->
  <script>
    (function () {
      const email = localStorage.getItem("auth_email");
      const role  = localStorage.getItem("auth_role");

      if (email) {
        // 顶部状态条（可删除）
        const bar = document.createElement("div");
        bar.style.textAlign = "center";
        bar.style.padding = "6px";
        bar.style.background = "#f0f4f8";
        bar.style.color = "#333";
        bar.style.fontSize = "14px";
        bar.textContent = `ログイン中: ${email}（役割: ${role || "user"}）`;
        document.body.prepend(bar);

        // 欢迎语（可选）
        const h1 = document.querySelector("header h1");
        if (h1 && !h1.dataset.welcomed) {
          h1.textContent = `🌏 神戸外国人生活ガイド（ようこそ ${email} さん）`;
          h1.dataset.welcomed = "1";
        }

        // 非管理员隐藏 admin-only
        if (role !== "admin") {
          document.querySelectorAll(".admin-only").forEach(el => el.style.display = "none");
        }
      } else {
        // 未登录则隐藏 admin-only
        document.querySelectorAll(".admin-only").forEach(el => el.style.display = "none");
      }
    })();
  </script>
  <script src="auth-guard.js"></script>
</body>
</html>